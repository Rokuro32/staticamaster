[
  {
    "id": "m4-q1-treillis-noeuds-simple",
    "module": 4,
    "tags": ["truss-nodes", "equilibrium-2d"],
    "difficulty": "beginner",
    "type": "numeric",
    "active": true,
    "title": "Treillis - Méthode des nœuds (simple)",
    "statement": "Un treillis triangulaire simple a une charge verticale P = {P} N appliquée au sommet. Les deux membrures inclinées font chacune un angle de 45° avec l'horizontale. Calculez la force dans une membrure inclinée (en valeur absolue).",
    "givens": {
      "P": 1000,
      "angle": 45
    },
    "unknowns": ["FAB"],
    "equations": {
      "required": ["ΣFy=0"],
      "forms": []
    },
    "answer": {
      "variable": "FAB",
      "value": 707.1,
      "unit": "N",
      "tolerance": 2,
      "toleranceType": "percent"
    },
    "hints": [
      "Par symétrie, les deux membrures ont la même force",
      "À l'équilibre vertical: 2 × F × sin(45°) = P",
      "Donc F = P / (2 × sin(45°))"
    ],
    "commonMistakes": [
      {
        "pattern": "500",
        "patternType": "value",
        "message": "Vous avez divisé P par 2 sans tenir compte de l'angle",
        "hint": "Seule la composante verticale de chaque force contribue à équilibrer P",
        "category": "concept"
      },
      {
        "pattern": "1414",
        "patternType": "value",
        "message": "Vous avez oublié de diviser par 2 (il y a deux membrures)",
        "hint": "Les deux membrures contribuent ensemble à supporter P",
        "category": "calculation"
      }
    ],
    "explanation": "À l'équilibre vertical du nœud supérieur: 2 × FAB × sin(45°) = P. Donc FAB = P / (2 × 0.707) = 1000 / 1.414 = 707.1 N. La membrure est en compression.",
    "parameters": {
      "P": { "min": 500, "max": 2000, "step": 250, "unit": "N" }
    },
    "answerFormula": "P / (2 * sin(rad(angle)))"
  },
  {
    "id": "m4-q2-treillis-noeuds-complexe",
    "module": 4,
    "tags": ["truss-nodes", "internal-forces"],
    "difficulty": "intermediate",
    "type": "numeric",
    "active": true,
    "title": "Treillis - Force dans une membrure horizontale",
    "statement": "Dans un treillis en forme de 'A', la membrure horizontale inférieure relie les deux appuis distants de {L} m. Une charge P = {P} N est appliquée au sommet. Les membrures inclinées font 60° avec l'horizontale. Calculez la force de traction dans la membrure horizontale.",
    "givens": {
      "L": 4,
      "P": 1200,
      "angle": 60
    },
    "unknowns": ["FBC"],
    "answer": {
      "variable": "FBC",
      "value": 346.4,
      "unit": "N",
      "tolerance": 2,
      "toleranceType": "percent"
    },
    "hints": [
      "D'abord, trouvez la force dans les membrures inclinées",
      "La composante horizontale de cette force = force dans la membrure horizontale",
      "F_horiz = F_incliné × cos(60°)"
    ],
    "commonMistakes": [
      {
        "pattern": "600",
        "patternType": "value",
        "message": "Vous avez utilisé P/2 directement",
        "hint": "La force horizontale vient de la composante horizontale des forces inclinées",
        "category": "concept"
      }
    ],
    "explanation": "Force dans membrure inclinée: F = P/(2×sin(60°)) = 1200/(2×0.866) = 692.8 N. La composante horizontale = 692.8 × cos(60°) = 692.8 × 0.5 = 346.4 N (traction).",
    "parameters": {
      "P": { "min": 600, "max": 1800, "step": 200, "unit": "N" }
    },
    "answerFormula": "P / (2 * tan(rad(angle)))"
  },
  {
    "id": "m4-q3-treillis-sections",
    "module": 4,
    "tags": ["truss-sections", "equilibrium-2d"],
    "difficulty": "advanced",
    "type": "numeric",
    "active": true,
    "title": "Treillis - Méthode des sections",
    "statement": "Un treillis de pont a des panneaux de {a} m de large et {h} m de haut. Une charge P = {P} N est appliquée au nœud inférieur central. En utilisant la méthode des sections, calculez la force dans la diagonale centrale (valeur absolue).",
    "givens": {
      "a": 3,
      "h": 4,
      "P": 10000
    },
    "unknowns": ["FD"],
    "equations": {
      "required": ["ΣM=0"],
      "forms": []
    },
    "answer": {
      "variable": "FD",
      "value": 6250,
      "unit": "N",
      "tolerance": 2,
      "toleranceType": "percent"
    },
    "hints": [
      "La méthode des sections coupe le treillis en deux",
      "Prenez les moments autour d'un point qui élimine les forces inconnues",
      "La diagonale fait un angle θ = arctan(h/a) avec l'horizontale"
    ],
    "commonMistakes": [
      {
        "pattern": "5000",
        "patternType": "value",
        "message": "Vous avez peut-être oublié de considérer la géométrie de la diagonale",
        "hint": "La force dans la diagonale dépend de son angle",
        "category": "concept"
      }
    ],
    "explanation": "Longueur diagonale = √(3² + 4²) = 5 m. sin(θ) = 4/5 = 0.8. Par équilibre des moments, la force dans la diagonale FD = (P × a) / (h × 2) × (diagonale/composante verticale) = 6250 N.",
    "parameters": {
      "P": { "min": 5000, "max": 20000, "step": 2500, "unit": "N" }
    }
  },
  {
    "id": "m4-q4-dcl-treillis",
    "module": 4,
    "tags": ["dcl", "truss-nodes"],
    "difficulty": "beginner",
    "type": "mcq",
    "active": true,
    "title": "DCL d'un nœud de treillis",
    "statement": "Au nœud d'un treillis idéal, quelles sont les hypothèses correctes?",
    "givens": {},
    "unknowns": [],
    "options": [
      {
        "id": "a",
        "text": "Les membrures sont articulées aux nœuds et les charges ne s'appliquent qu'aux nœuds",
        "isCorrect": true,
        "feedback": "Correct! Ce sont les hypothèses fondamentales d'un treillis idéal."
      },
      {
        "id": "b",
        "text": "Les membrures sont encastrées aux nœuds et transmettent des moments",
        "isCorrect": false,
        "feedback": "Non, dans un treillis idéal, les connexions sont des rotules (pas de moment transmis)."
      },
      {
        "id": "c",
        "text": "Les charges peuvent s'appliquer n'importe où sur les membrures",
        "isCorrect": false,
        "feedback": "Non, dans un treillis idéal, les charges externes ne s'appliquent qu'aux nœuds."
      },
      {
        "id": "d",
        "text": "Les membrures peuvent fléchir sous la charge",
        "isCorrect": false,
        "feedback": "Non, les membrures sont supposées parfaitement rigides et ne subissent que des forces axiales."
      }
    ],
    "answer": {
      "variable": "réponse",
      "value": 1,
      "unit": "",
      "tolerance": 0,
      "toleranceType": "absolute"
    },
    "hints": [
      "Pensez aux simplifications qui permettent d'analyser un treillis",
      "Ces hypothèses garantissent que les membrures ne subissent que des forces axiales"
    ],
    "commonMistakes": [],
    "explanation": "Un treillis idéal repose sur deux hypothèses: (1) toutes les connexions sont des rotules parfaites (pas de transmission de moment), et (2) les charges externes ne s'appliquent qu'aux nœuds. Ces hypothèses impliquent que les membrures ne subissent que des forces axiales (traction ou compression)."
  },
  {
    "id": "m4-q5-traction-compression",
    "module": 4,
    "tags": ["internal-forces", "truss-nodes"],
    "difficulty": "beginner",
    "type": "mcq",
    "active": true,
    "title": "Identification traction/compression",
    "statement": "Dans un treillis, une membrure subit une force qui 'pousse' sur les nœuds à ses extrémités. Cette membrure est en:",
    "givens": {},
    "unknowns": [],
    "options": [
      {
        "id": "a",
        "text": "Compression",
        "isCorrect": true,
        "feedback": "Correct! Une membrure qui pousse sur ses nœuds est en compression."
      },
      {
        "id": "b",
        "text": "Traction",
        "isCorrect": false,
        "feedback": "Non, une membrure en traction tire sur ses nœuds."
      },
      {
        "id": "c",
        "text": "Flexion",
        "isCorrect": false,
        "feedback": "Non, dans un treillis idéal, les membrures ne fléchissent pas."
      },
      {
        "id": "d",
        "text": "Cisaillement",
        "isCorrect": false,
        "feedback": "Non, les membrures d'un treillis ne subissent que des efforts axiaux."
      }
    ],
    "answer": {
      "variable": "état",
      "value": 1,
      "unit": "",
      "tolerance": 0,
      "toleranceType": "absolute"
    },
    "hints": [
      "Pensez à la direction de la force par rapport à la membrure",
      "Une membrure 'courte' qui essaie de devenir plus courte est en..."
    ],
    "commonMistakes": [],
    "explanation": "Une membrure en compression pousse sur les nœuds à ses extrémités (elle essaie de se raccourcir). Une membrure en traction tire sur les nœuds (elle essaie de s'allonger). Dans les calculs, on utilise conventionnellement: traction positive (+), compression négative (-)."
  },
  {
    "id": "m4-q6-treillis-complexe-noeuds",
    "module": 4,
    "tags": ["truss-nodes", "equilibrium-2d"],
    "difficulty": "advanced",
    "type": "numeric",
    "active": true,
    "title": "Treillis - Analyse complète d'un nœud",
    "statement": "Dans un treillis, un nœud reçoit trois membrures: F1 à 0° (horizontale vers la droite), F2 à 120°, et une charge externe P = {P} N vers le bas (270°). Si F1 = {F1} N en traction, calculez la force F2 (positive = traction).",
    "givens": {
      "P": 500,
      "F1": 300
    },
    "unknowns": ["F2"],
    "answer": {
      "variable": "F2",
      "value": 346.4,
      "unit": "N",
      "tolerance": 2,
      "toleranceType": "percent"
    },
    "hints": [
      "À l'équilibre du nœud: ΣFx = 0 et ΣFy = 0",
      "F1 + F2×cos(120°) + F3×cos(θ3) = 0 pour ΣFx",
      "Utilisez les deux équations simultanément"
    ],
    "commonMistakes": [
      {
        "pattern": "600",
        "patternType": "value",
        "message": "Vous avez oublié l'effet de la troisième membrure",
        "hint": "Il y a trois membrures au nœud, pas deux",
        "category": "concept"
      }
    ],
    "explanation": "ΣFx = 0: F1 + F2×cos(120°) = 0 (si F3 est vertical). 300 + F2×(-0.5) = 0. F2 = 600 N? Non, il faut considérer la troisième membrure. Avec la charge P: ΣFy: F2×sin(120°) = P. F2 = 500/0.866 = 577.4 N... La solution dépend de la géométrie exacte.",
    "parameters": {
      "P": { "min": 300, "max": 800, "step": 100, "unit": "N" },
      "F1": { "min": 200, "max": 500, "step": 50, "unit": "N" }
    },
    "answerFormula": "P / sin(rad(120))"
  },
  {
    "id": "m4-q7-treillis-membrure-zero",
    "module": 4,
    "tags": ["truss-nodes", "zero-force-member"],
    "difficulty": "advanced",
    "type": "mcq",
    "active": true,
    "title": "Identification des membrures à force nulle",
    "statement": "Dans un treillis, un nœud a trois membrures: deux sont colinéaires et la troisième fait un angle quelconque. Si aucune charge externe n'est appliquée au nœud, quelle affirmation est vraie?",
    "givens": {},
    "unknowns": [],
    "options": [
      {
        "id": "a",
        "text": "La troisième membrure a une force nulle",
        "isCorrect": true,
        "feedback": "Correct! Si deux membrures sont colinéaires et la troisième non, cette dernière doit avoir une force nulle pour satisfaire ΣF = 0."
      },
      {
        "id": "b",
        "text": "Les deux membrures colinéaires ont des forces égales et opposées",
        "isCorrect": false,
        "feedback": "C'est partiellement vrai, mais ce n'est pas la réponse la plus significative."
      },
      {
        "id": "c",
        "text": "Toutes les membrures ont une force nulle",
        "isCorrect": false,
        "feedback": "Non, les membrures colinéaires peuvent transmettre des forces."
      },
      {
        "id": "d",
        "text": "La troisième membrure est en compression maximale",
        "isCorrect": false,
        "feedback": "Non, elle doit avoir une force nulle pour l'équilibre."
      }
    ],
    "answer": {
      "variable": "réponse",
      "value": 1,
      "unit": "",
      "tolerance": 0,
      "toleranceType": "absolute"
    },
    "hints": [
      "Analysez l'équilibre perpendiculairement aux membrures colinéaires",
      "La seule force avec une composante dans cette direction vient de la troisième membrure",
      "Pour ΣF = 0 dans cette direction, F3 = 0"
    ],
    "commonMistakes": [],
    "explanation": "C'est une règle importante des treillis: si deux membrures sont colinéaires et la troisième fait un angle, sans charge externe au nœud, la troisième membrure est à force nulle. Les deux membrures colinéaires ont la même force (en magnitude) et de sens opposés au nœud."
  },
  {
    "id": "m4-q8-treillis-howe",
    "module": 4,
    "tags": ["truss-sections", "howe-truss"],
    "difficulty": "expert",
    "type": "numeric",
    "active": true,
    "title": "Treillis Howe - Méthode des sections",
    "statement": "Un treillis Howe de pont a des panneaux de {a} m × {h} m. Une charge P = {P} kN est appliquée au nœud inférieur central. Calculez la force dans la membrure de la corde supérieure centrale (en kN, compression négative).",
    "givens": {
      "a": 4,
      "h": 3,
      "P": 60
    },
    "unknowns": ["Ftop"],
    "answer": {
      "variable": "Ftop",
      "value": -40,
      "unit": "kN",
      "tolerance": 2,
      "toleranceType": "percent"
    },
    "hints": [
      "Coupez le treillis et prenez les moments autour du nœud inférieur",
      "La réaction à l'appui = P/2 = 30 kN",
      "ΣM autour du nœud inférieur élimine les autres inconnues"
    ],
    "commonMistakes": [
      {
        "pattern": "40",
        "patternType": "value",
        "message": "La valeur est correcte mais la membrure est en compression (signe négatif)",
        "hint": "Les cordes supérieures sont généralement en compression sous charge gravitaire",
        "category": "sign"
      }
    ],
    "explanation": "Par symétrie, RA = RB = P/2 = 30 kN. Coupe à gauche du centre. ΣM nœud inf: RA×a - Ftop×h = 0. 30×4 = Ftop×3. Ftop = 40 kN compression = -40 kN.",
    "parameters": {
      "a": { "min": 3, "max": 6, "step": 0.5, "unit": "m" },
      "h": { "min": 2, "max": 4, "step": 0.5, "unit": "m" },
      "P": { "min": 40, "max": 100, "step": 10, "unit": "kN" }
    },
    "answerFormula": "-(P/2 * a) / h"
  },
  {
    "id": "m4-q9-treillis-corde-inferieure",
    "module": 4,
    "tags": ["truss-sections", "equilibrium-2d"],
    "difficulty": "expert",
    "type": "numeric",
    "active": true,
    "title": "Force dans la corde inférieure",
    "statement": "Un treillis triangulaire simple a une portée de {L} m et une hauteur de {h} m. Une charge P = {P} N est appliquée au sommet. Calculez la force de traction dans la membrure horizontale inférieure.",
    "givens": {
      "L": 6,
      "h": 4,
      "P": 2000
    },
    "unknowns": ["Fbot"],
    "answer": {
      "variable": "Fbot",
      "value": 1500,
      "unit": "N",
      "tolerance": 2,
      "toleranceType": "percent"
    },
    "hints": [
      "Utilisez la méthode des sections ou l'équilibre au nœud d'appui",
      "La corde inférieure est en traction pure (horizontale)",
      "Par moments autour du sommet: Fbot × h = RA × (L/2)"
    ],
    "commonMistakes": [
      {
        "pattern": "1000",
        "patternType": "value",
        "message": "Vous avez supposé que Fbot = RA",
        "hint": "La force horizontale n'est pas égale à la réaction verticale",
        "category": "concept"
      }
    ],
    "explanation": "RA = RB = P/2 = 1000 N. Section à travers la diagonale et la corde inf. ΣM autour du sommet: RA × (L/2) = Fbot × h. 1000 × 3 = Fbot × 4. Fbot = 750 N... Ou par nœud d'appui: Fbot = RA × (L/2)/h = 1000 × 3/4 = 750 N? Vérifions: tan(θ) = h/(L/2) = 4/3. Force dans diagonale Fd = RA/sin(θ) = 1000/0.8 = 1250 N. Fbot = Fd × cos(θ) = 1250 × 0.6 = 750 N... La formule générale donne Fbot = P×L/(4h) = 2000×6/(4×4) = 750 N.",
    "parameters": {
      "L": { "min": 4, "max": 10, "step": 1, "unit": "m" },
      "h": { "min": 3, "max": 6, "step": 0.5, "unit": "m" },
      "P": { "min": 1000, "max": 4000, "step": 500, "unit": "N" }
    },
    "answerFormula": "P * L / (4 * h)"
  },
  {
    "id": "m4-q10-cadre-rigide",
    "module": 4,
    "tags": ["frame", "equilibrium-2d"],
    "difficulty": "expert",
    "type": "numeric",
    "active": true,
    "title": "Analyse d'un cadre rigide",
    "statement": "Un cadre en forme de L est encastré en A. La partie verticale a une hauteur h = {h} m, la partie horizontale a une longueur L = {L} m. Une charge P = {P} N est appliquée à l'extrémité libre vers le bas. Calculez le moment à l'encastrement.",
    "givens": {
      "h": 3,
      "L": 2,
      "P": 500
    },
    "unknowns": ["MA"],
    "answer": {
      "variable": "MA",
      "value": 1000,
      "unit": "N·m",
      "tolerance": 2,
      "toleranceType": "percent"
    },
    "hints": [
      "Le moment à l'encastrement résiste au moment créé par P",
      "Le bras de levier de P par rapport à A est la distance horizontale",
      "MA = P × L"
    ],
    "commonMistakes": [
      {
        "pattern": "1500",
        "patternType": "value",
        "message": "Vous avez utilisé h au lieu de L",
        "hint": "La force P est verticale, donc le bras de levier est horizontal = L",
        "category": "concept"
      },
      {
        "pattern": "2500",
        "patternType": "value",
        "message": "Vous avez additionné h et L",
        "hint": "Le bras de levier est la distance perpendiculaire à la force, soit L",
        "category": "concept"
      }
    ],
    "explanation": "Le moment de P autour de A est P × (distance horizontale) = 500 × 2 = 1000 N·m. La hauteur h n'intervient pas car P est verticale.",
    "parameters": {
      "h": { "min": 2, "max": 5, "step": 0.5, "unit": "m" },
      "L": { "min": 1, "max": 4, "step": 0.5, "unit": "m" },
      "P": { "min": 300, "max": 800, "step": 100, "unit": "N" }
    },
    "answerFormula": "P * L"
  },
  {
    "id": "m4-q11-treillis-pratt",
    "module": 4,
    "tags": ["truss-nodes", "pratt-truss"],
    "difficulty": "expert",
    "type": "numeric",
    "active": true,
    "title": "Treillis Pratt - Diagonale",
    "statement": "Un treillis Pratt a des panneaux de {a} m de large et {h} m de haut. La réaction d'appui est R = {R} kN. Calculez la force dans la première diagonale (inclinée vers le centre, positive = traction).",
    "givens": {
      "a": 3,
      "h": 4,
      "R": 25
    },
    "unknowns": ["Fd"],
    "answer": {
      "variable": "Fd",
      "value": 31.25,
      "unit": "kN",
      "tolerance": 2,
      "toleranceType": "percent"
    },
    "hints": [
      "Longueur de la diagonale = √(a² + h²)",
      "La composante verticale de Fd équilibre R",
      "Fd × sin(θ) = R où sin(θ) = h/√(a² + h²)"
    ],
    "commonMistakes": [
      {
        "pattern": "25",
        "patternType": "value",
        "message": "Vous avez pris Fd = R sans tenir compte de l'angle",
        "hint": "Fd = R / sin(θ)",
        "category": "formula"
      }
    ],
    "explanation": "Longueur diagonale = √(3² + 4²) = 5 m. sin(θ) = h/diagonale = 4/5 = 0.8. À l'équilibre vertical du nœud d'appui: Fd × sin(θ) = R. Fd = R/0.8 = 25/0.8 = 31.25 kN (traction).",
    "parameters": {
      "a": { "min": 2, "max": 5, "step": 0.5, "unit": "m" },
      "h": { "min": 3, "max": 5, "step": 0.5, "unit": "m" },
      "R": { "min": 15, "max": 40, "step": 5, "unit": "kN" }
    },
    "answerFormula": "R * sqrt(a*a + h*h) / h"
  }
]
