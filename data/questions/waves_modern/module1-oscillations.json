[
  {
    "id": "wm-m1-q1-periode-mhs",
    "module": 1,
    "tags": ["shm"],
    "difficulty": "beginner",
    "type": "numeric",
    "active": true,
    "title": "Periode d'un MHS",
    "statement": "Un systeme masse-ressort oscille avec une frequence de {f} Hz. Calculez la periode d'oscillation.",
    "givens": {
      "f": 4
    },
    "unknowns": ["T"],
    "answer": {
      "variable": "T",
      "value": 0.25,
      "unit": "s",
      "tolerance": 2,
      "toleranceType": "percent"
    },
    "hints": [
      "La periode et la frequence sont liees par T = 1/f",
      "T est l'inverse de f",
      "T = 1/f"
    ],
    "commonMistakes": [
      {
        "pattern": "4",
        "patternType": "value",
        "message": "Vous avez donne la frequence, pas la periode",
        "hint": "T = 1/f, pas f",
        "category": "concept"
      }
    ],
    "explanation": "La periode est l'inverse de la frequence: T = 1/f = 1/4 = 0.25 s.",
    "parameters": {
      "f": { "min": 2, "max": 10, "step": 1, "unit": "Hz" }
    },
    "answerFormula": "1 / f"
  },
  {
    "id": "wm-m1-q2-pendule-simple",
    "module": 1,
    "tags": ["shm"],
    "difficulty": "intermediate",
    "type": "numeric",
    "active": true,
    "title": "Pendule simple - Periode",
    "statement": "Un pendule simple de longueur {L} m oscille avec de petites amplitudes. Calculez sa periode. (g = 10 m/s²)",
    "givens": {
      "L": 1.6,
      "g": 10
    },
    "unknowns": ["T"],
    "answer": {
      "variable": "T",
      "value": 2.51,
      "unit": "s",
      "tolerance": 2,
      "toleranceType": "percent"
    },
    "hints": [
      "La periode d'un pendule simple est T = 2π√(L/g)",
      "Elle ne depend pas de la masse",
      "T = 2π√(L/g)"
    ],
    "commonMistakes": [
      {
        "pattern": "0.4",
        "patternType": "value",
        "message": "Vous avez oublie le facteur 2π ou la racine carree",
        "hint": "T = 2π√(L/g), pas L/g",
        "category": "formula"
      },
      {
        "pattern": "7.9",
        "patternType": "value",
        "message": "Vous avez utilise √(g/L) au lieu de √(L/g)",
        "hint": "T = 2π√(L/g), pas 2π√(g/L)",
        "category": "formula"
      }
    ],
    "explanation": "T = 2π√(L/g) = 2π√(1.6/10) = 2π√0.16 = 2π × 0.4 = 2.51 s.",
    "parameters": {
      "L": { "min": 0.4, "max": 2.5, "step": 0.2, "unit": "m" }
    },
    "answerFormula": "2 * 3.14159 * sqrt(L / g)"
  },
  {
    "id": "wm-m1-q3-ressort-constante",
    "module": 1,
    "tags": ["shm"],
    "difficulty": "intermediate",
    "type": "numeric",
    "active": true,
    "title": "Systeme masse-ressort",
    "statement": "Une masse de {m} kg attachee a un ressort oscille avec une periode de {T} s. Calculez la constante du ressort.",
    "givens": {
      "m": 0.5,
      "T": 1
    },
    "unknowns": ["k"],
    "answer": {
      "variable": "k",
      "value": 19.74,
      "unit": "N/m",
      "tolerance": 2,
      "toleranceType": "percent"
    },
    "hints": [
      "T = 2π√(m/k), donc k = 4π²m/T²",
      "Isolez k de la formule de la periode",
      "k = (2π/T)² × m"
    ],
    "commonMistakes": [
      {
        "pattern": "0.5",
        "patternType": "value",
        "message": "Vous avez donne m/T² sans le facteur 4π²",
        "hint": "k = 4π²m/T², n'oubliez pas 4π²",
        "category": "formula"
      }
    ],
    "explanation": "De T = 2π√(m/k), on tire k = 4π²m/T² = 4 × 9.87 × 0.5 / 1² = 19.74 N/m.",
    "parameters": {
      "m": { "min": 0.2, "max": 1.0, "step": 0.1, "unit": "kg" },
      "T": { "min": 0.5, "max": 2.0, "step": 0.25, "unit": "s" }
    },
    "answerFormula": "4 * 3.14159 * 3.14159 * m / (T * T)"
  },
  {
    "id": "wm-m1-q4-energie-mhs",
    "module": 1,
    "tags": ["shm", "wave-energy"],
    "difficulty": "intermediate",
    "type": "numeric",
    "active": true,
    "title": "Energie d'un MHS",
    "statement": "Un ressort de constante {k} N/m est etire de {A} cm depuis sa position d'equilibre. Calculez l'energie mecanique totale du systeme.",
    "givens": {
      "k": 200,
      "A": 5
    },
    "unknowns": ["E"],
    "answer": {
      "variable": "E",
      "value": 0.25,
      "unit": "J",
      "tolerance": 2,
      "toleranceType": "percent"
    },
    "hints": [
      "L'energie totale est l'energie potentielle maximale",
      "E = ½kA²",
      "Attention: convertissez l'amplitude en metres"
    ],
    "commonMistakes": [
      {
        "pattern": "2500",
        "patternType": "value",
        "message": "Vous n'avez pas converti cm en m",
        "hint": "A = 5 cm = 0.05 m",
        "category": "unit"
      },
      {
        "pattern": "0.5",
        "patternType": "value",
        "message": "Vous avez oublie le facteur ½",
        "hint": "E = ½kA², pas kA²",
        "category": "formula"
      }
    ],
    "explanation": "E = ½kA² = ½ × 200 × (0.05)² = ½ × 200 × 0.0025 = 0.25 J.",
    "parameters": {
      "k": { "min": 100, "max": 400, "step": 50, "unit": "N/m" },
      "A": { "min": 3, "max": 10, "step": 1, "unit": "cm" }
    },
    "answerFormula": "0.5 * k * (A/100) * (A/100)"
  },
  {
    "id": "wm-m1-q5-onde-vitesse",
    "module": 1,
    "tags": ["standing-waves"],
    "difficulty": "beginner",
    "type": "numeric",
    "active": true,
    "title": "Vitesse d'une onde",
    "statement": "Une onde se propage avec une frequence de {f} Hz et une longueur d'onde de {lambda} m. Calculez sa vitesse de propagation.",
    "givens": {
      "f": 50,
      "lambda": 4
    },
    "unknowns": ["v"],
    "answer": {
      "variable": "v",
      "value": 200,
      "unit": "m/s",
      "tolerance": 2,
      "toleranceType": "percent"
    },
    "hints": [
      "La relation fondamentale des ondes est v = fλ",
      "v est le produit de f et λ",
      "v = f × λ"
    ],
    "commonMistakes": [
      {
        "pattern": "12.5",
        "patternType": "value",
        "message": "Vous avez divise au lieu de multiplier",
        "hint": "v = f × λ, pas f/λ",
        "category": "formula"
      }
    ],
    "explanation": "v = fλ = 50 × 4 = 200 m/s.",
    "parameters": {
      "f": { "min": 20, "max": 100, "step": 10, "unit": "Hz" },
      "lambda": { "min": 2, "max": 8, "step": 1, "unit": "m" }
    },
    "answerFormula": "f * lambda"
  },
  {
    "id": "wm-m1-q6-doppler",
    "module": 1,
    "tags": ["doppler", "sound"],
    "difficulty": "advanced",
    "type": "numeric",
    "active": true,
    "title": "Effet Doppler",
    "statement": "Une ambulance emet un son de frequence {f0} Hz. Elle s'approche d'un observateur immobile a une vitesse de {vs} m/s. Quelle frequence l'observateur percoit-il? (vitesse du son = 340 m/s)",
    "givens": {
      "f0": 800,
      "vs": 34,
      "c": 340
    },
    "unknowns": ["f"],
    "answer": {
      "variable": "f",
      "value": 888.89,
      "unit": "Hz",
      "tolerance": 2,
      "toleranceType": "percent"
    },
    "hints": [
      "Pour une source qui s'approche: f = f0 × c/(c - vs)",
      "La frequence percue est plus elevee quand la source s'approche",
      "f = f0 × c/(c - vs)"
    ],
    "commonMistakes": [
      {
        "pattern": "720",
        "patternType": "value",
        "message": "Vous avez utilise (c + vs) au lieu de (c - vs)",
        "hint": "Pour une source qui s'approche: f = f0 × c/(c - vs)",
        "category": "formula"
      }
    ],
    "explanation": "f = f0 × c/(c - vs) = 800 × 340/(340 - 34) = 800 × 340/306 = 888.89 Hz.",
    "parameters": {
      "f0": { "min": 500, "max": 1000, "step": 100, "unit": "Hz" },
      "vs": { "min": 20, "max": 50, "step": 5, "unit": "m/s" }
    },
    "answerFormula": "f0 * c / (c - vs)"
  },
  {
    "id": "wm-m1-q7-ondes-stationnaires",
    "module": 1,
    "tags": ["standing-waves", "resonance"],
    "difficulty": "intermediate",
    "type": "numeric",
    "active": true,
    "title": "Ondes stationnaires sur une corde",
    "statement": "Une corde de longueur {L} m est fixee aux deux extremites. Calculez la longueur d'onde du 3e harmonique.",
    "givens": {
      "L": 1.5,
      "n": 3
    },
    "unknowns": ["lambda"],
    "answer": {
      "variable": "λ",
      "value": 1,
      "unit": "m",
      "tolerance": 2,
      "toleranceType": "percent"
    },
    "hints": [
      "Pour une corde fixee aux deux bouts: λn = 2L/n",
      "n est le numero de l'harmonique",
      "λ3 = 2L/3"
    ],
    "commonMistakes": [
      {
        "pattern": "4.5",
        "patternType": "value",
        "message": "Vous avez multiplie au lieu de diviser",
        "hint": "λn = 2L/n, pas 2L × n",
        "category": "formula"
      },
      {
        "pattern": "0.5",
        "patternType": "value",
        "message": "Vous avez oublie le facteur 2",
        "hint": "λn = 2L/n, pas L/n",
        "category": "formula"
      }
    ],
    "explanation": "Pour le 3e harmonique: λ3 = 2L/3 = 2 × 1.5 / 3 = 1 m.",
    "parameters": {
      "L": { "min": 0.6, "max": 2.4, "step": 0.3, "unit": "m" }
    },
    "answerFormula": "2 * L / n"
  },
  {
    "id": "wm-m1-q8-dessiner-onde",
    "module": 1,
    "tags": ["shm", "wave-function"],
    "difficulty": "intermediate",
    "type": "wave-sketch",
    "active": true,
    "title": "Dessiner une onde sinusoidale",
    "statement": "Dessinez l'onde decrite par l'equation: y(x) = 2 sin(πx). L'amplitude est de 2 m et la longueur d'onde est de 2 m.",
    "givens": {
      "A": 2,
      "lambda": 2
    },
    "unknowns": ["y(x)"],
    "waveSketch": {
      "amplitude": 2,
      "wavelength": 2,
      "phase": 0,
      "phaseUnit": "rad",
      "waveType": "sine",
      "xAxisLabel": "x (m)",
      "yAxisLabel": "y (m)",
      "xRange": [0, 4],
      "yRange": [-3, 3],
      "gridSpacing": 1,
      "tolerance": 15
    },
    "answer": {
      "variable": "wave",
      "value": 1,
      "unit": "",
      "tolerance": 20,
      "toleranceType": "percent"
    },
    "hints": [
      "L'amplitude A = 2 m signifie que l'onde varie entre -2 et +2",
      "La longueur d'onde λ = 2 m signifie qu'un cycle complet se repete tous les 2 m",
      "Une fonction sinus commence a zero et monte d'abord"
    ],
    "commonMistakes": [],
    "explanation": "L'equation y(x) = 2 sin(πx) decrit une onde sinusoidale avec A = 2 m et k = π rad/m, donc λ = 2π/k = 2 m. L'onde commence a y = 0 en x = 0 et atteint son maximum y = 2 en x = 0.5 m."
  },
  {
    "id": "wm-m1-q9-identifier-equation",
    "module": 1,
    "tags": ["shm", "wave-function"],
    "difficulty": "beginner",
    "type": "wave-match",
    "active": true,
    "title": "Identifier l'equation d'une onde",
    "statement": "Observez le graphique et selectionnez l'equation qui correspond a cette onde.",
    "givens": {},
    "unknowns": ["equation"],
    "waveMatch": {
      "waveConfig": {
        "amplitude": 3,
        "wavelength": 4,
        "phase": 0,
        "phaseUnit": "rad",
        "waveType": "sine",
        "xAxisLabel": "x (m)",
        "yAxisLabel": "y (m)",
        "xRange": [0, 8],
        "yRange": [-4, 4],
        "gridSpacing": 1,
        "tolerance": 10
      },
      "options": [
        {
          "id": "opt1",
          "equation": "y = 3 sin(πx/2)",
          "isCorrect": true,
          "feedback": "Correct! A = 3 m et k = π/2 rad/m donne λ = 4 m."
        },
        {
          "id": "opt2",
          "equation": "y = 3 cos(πx/2)",
          "isCorrect": false,
          "feedback": "Incorrect. Une fonction cosinus commence a son maximum, pas a zero."
        },
        {
          "id": "opt3",
          "equation": "y = 4 sin(πx/3)",
          "isCorrect": false,
          "feedback": "Incorrect. L'amplitude est 3 m, pas 4 m."
        },
        {
          "id": "opt4",
          "equation": "y = 3 sin(2πx)",
          "isCorrect": false,
          "feedback": "Incorrect. Cela donnerait λ = 1 m, mais l'onde a une longueur d'onde de 4 m."
        }
      ]
    },
    "answer": {
      "variable": "equation",
      "value": 1,
      "unit": "",
      "tolerance": 0,
      "toleranceType": "absolute"
    },
    "hints": [
      "Regardez l'amplitude: quelle est la valeur maximale de y?",
      "Comptez combien de metres pour un cycle complet (λ)",
      "La fonction commence-t-elle a zero (sinus) ou au maximum (cosinus)?"
    ],
    "commonMistakes": [],
    "explanation": "L'onde a une amplitude de 3 m (valeur max) et une longueur d'onde de 4 m (un cycle complet). Comme elle commence a zero et monte, c'est un sinus. Donc y = 3 sin(kx) avec k = 2π/λ = π/2."
  },
  {
    "id": "wm-m1-q10-lire-parametres",
    "module": 1,
    "tags": ["shm", "wave-function"],
    "difficulty": "intermediate",
    "type": "parameter-identify",
    "active": true,
    "title": "Lire les parametres d'une onde",
    "statement": "A partir du graphique, identifiez l'amplitude et la longueur d'onde de cette onde sinusoidale.",
    "givens": {},
    "unknowns": ["A", "lambda"],
    "parameterIdentify": {
      "waveConfig": {
        "amplitude": 2.5,
        "wavelength": 3,
        "phase": 0,
        "phaseUnit": "rad",
        "waveType": "sine",
        "xAxisLabel": "x (m)",
        "yAxisLabel": "y (m)",
        "xRange": [0, 9],
        "yRange": [-4, 4],
        "gridSpacing": 1,
        "tolerance": 10
      },
      "parametersToFind": ["amplitude", "wavelength"]
    },
    "answer": {
      "variable": "params",
      "value": 1,
      "unit": "",
      "tolerance": 10,
      "toleranceType": "percent"
    },
    "hints": [
      "L'amplitude est la distance entre l'equilibre (y=0) et le maximum",
      "La longueur d'onde est la distance entre deux cretes consecutives",
      "Utilisez la grille pour mesurer precisement"
    ],
    "commonMistakes": [],
    "explanation": "L'amplitude A = 2.5 m (lecture du maximum). La longueur d'onde λ = 3 m (distance entre deux maximums consecutifs ou entre deux points equivalents du cycle)."
  },
  {
    "id": "wm-m1-q11-dessiner-cosinus",
    "module": 1,
    "tags": ["shm", "wave-function"],
    "difficulty": "advanced",
    "type": "wave-sketch",
    "active": true,
    "title": "Dessiner une onde cosinus avec dephasage",
    "statement": "Dessinez l'onde decrite par l'equation: y(x) = 1.5 cos(2πx/3 - π/2). Notez que le dephasage de -π/2 decale l'onde vers la droite.",
    "givens": {
      "A": 1.5,
      "lambda": 3,
      "phi": -90
    },
    "unknowns": ["y(x)"],
    "waveSketch": {
      "amplitude": 1.5,
      "wavelength": 3,
      "phase": -1.5708,
      "phaseUnit": "rad",
      "waveType": "cosine",
      "xAxisLabel": "x (m)",
      "yAxisLabel": "y (m)",
      "xRange": [0, 6],
      "yRange": [-2, 2],
      "gridSpacing": 0.5,
      "tolerance": 15
    },
    "answer": {
      "variable": "wave",
      "value": 1,
      "unit": "",
      "tolerance": 20,
      "toleranceType": "percent"
    },
    "hints": [
      "A = 1.5 m, donc l'onde oscille entre -1.5 et +1.5",
      "λ = 3 m (car k = 2π/3)",
      "Le dephasage -π/2 decale le cosinus pour qu'il ressemble a un sinus"
    ],
    "commonMistakes": [],
    "explanation": "L'onde y = 1.5 cos(2πx/3 - π/2) est equivalente a y = 1.5 sin(2πx/3) grace a l'identite cos(θ - π/2) = sin(θ). Elle commence a zero en x = 0."
  },
  {
    "id": "wm-m1-q12-match-dephasage",
    "module": 1,
    "tags": ["shm", "wave-function", "phase"],
    "difficulty": "advanced",
    "type": "wave-match",
    "active": true,
    "title": "Identifier une onde avec dephasage",
    "statement": "Cette onde ne commence pas a zero. Identifiez l'equation correcte en observant la phase initiale.",
    "givens": {},
    "unknowns": ["equation"],
    "waveMatch": {
      "waveConfig": {
        "amplitude": 2,
        "wavelength": 4,
        "phase": 1.5708,
        "phaseUnit": "rad",
        "waveType": "sine",
        "xAxisLabel": "x (m)",
        "yAxisLabel": "y (m)",
        "xRange": [0, 8],
        "yRange": [-3, 3],
        "gridSpacing": 1,
        "tolerance": 10
      },
      "options": [
        {
          "id": "opt1",
          "equation": "y = 2 sin(πx/2 + π/2)",
          "isCorrect": true,
          "feedback": "Correct! Le dephasage +π/2 fait que l'onde commence a son maximum."
        },
        {
          "id": "opt2",
          "equation": "y = 2 sin(πx/2)",
          "isCorrect": false,
          "feedback": "Incorrect. Cette onde commencerait a zero, pas au maximum."
        },
        {
          "id": "opt3",
          "equation": "y = 2 cos(πx/2 + π/2)",
          "isCorrect": false,
          "feedback": "Incorrect. cos(θ + π/2) = -sin(θ), l'onde commencerait a zero et descendrait."
        },
        {
          "id": "opt4",
          "equation": "y = 2 sin(πx/2 - π/2)",
          "isCorrect": false,
          "feedback": "Incorrect. Le dephasage -π/2 ferait commencer l'onde a son minimum, pas maximum."
        }
      ]
    },
    "answer": {
      "variable": "equation",
      "value": 1,
      "unit": "",
      "tolerance": 0,
      "toleranceType": "absolute"
    },
    "hints": [
      "Observez la valeur de y en x = 0",
      "sin(π/2) = 1, donc sin(θ + π/2) commence a 1 (maximum)",
      "cos(0) = 1 aussi, mais verifiez la suite de la courbe"
    ],
    "commonMistakes": [],
    "explanation": "L'onde commence a y = 2 (maximum) en x = 0. Cela correspond a sin(π/2) = 1, donc y = 2 sin(πx/2 + π/2). Note: c'est equivalent a y = 2 cos(πx/2)."
  },
  {
    "id": "wm-m1-q13-resonance-ressort",
    "module": 1,
    "tags": ["shm", "resonance"],
    "difficulty": "advanced",
    "type": "numeric",
    "active": true,
    "title": "Frequence de resonance",
    "statement": "Un systeme masse-ressort a une masse de {m} kg et une constante de ressort de {k} N/m. Calculez la frequence de resonance en Hz.",
    "givens": {
      "m": 2,
      "k": 200
    },
    "unknowns": ["f0"],
    "answer": {
      "variable": "f0",
      "value": 1.59,
      "unit": "Hz",
      "tolerance": 2,
      "toleranceType": "percent"
    },
    "hints": [
      "La frequence angulaire ω0 = √(k/m)",
      "La frequence f = ω/(2π)",
      "f0 = (1/2π)√(k/m)"
    ],
    "commonMistakes": [
      {
        "pattern": "10",
        "patternType": "value",
        "message": "Vous avez calcule ω0, pas f0",
        "hint": "f0 = ω0/(2π)",
        "category": "formula"
      }
    ],
    "explanation": "ω0 = √(k/m) = √(200/2) = 10 rad/s. f0 = ω0/(2π) = 10/(2π) = 1.59 Hz.",
    "parameters": {
      "m": { "min": 1, "max": 5, "step": 0.5, "unit": "kg" },
      "k": { "min": 100, "max": 500, "step": 50, "unit": "N/m" }
    },
    "answerFormula": "sqrt(k/m) / (2 * 3.14159)"
  },
  {
    "id": "wm-m1-q14-amortissement",
    "module": 1,
    "tags": ["shm", "damping"],
    "difficulty": "advanced",
    "type": "numeric",
    "active": true,
    "title": "Oscillations amorties",
    "statement": "Un oscillateur amorti a une amplitude initiale A0 = {A0} cm. Apres {n} oscillations, l'amplitude est reduite a {An} cm. Calculez le facteur de decroissance par cycle.",
    "givens": {
      "A0": 10,
      "n": 5,
      "An": 3.68
    },
    "unknowns": ["r"],
    "answer": {
      "variable": "r",
      "value": 0.82,
      "unit": "",
      "tolerance": 2,
      "toleranceType": "percent"
    },
    "hints": [
      "An = A0 × r^n",
      "r = (An/A0)^(1/n)",
      "r est le facteur par lequel l'amplitude diminue a chaque cycle"
    ],
    "commonMistakes": [
      {
        "pattern": "0.368",
        "patternType": "value",
        "message": "Vous avez calcule An/A0, pas r",
        "hint": "r = (An/A0)^(1/n)",
        "category": "formula"
      }
    ],
    "explanation": "r = (An/A0)^(1/n) = (3.68/10)^(1/5) = 0.368^0.2 = 0.82.",
    "parameters": {
      "A0": { "min": 8, "max": 15, "step": 1, "unit": "cm" },
      "n": { "min": 3, "max": 10, "step": 1, "unit": "" },
      "An": { "min": 2, "max": 6, "step": 0.5, "unit": "cm" }
    },
    "answerFormula": "pow(An/A0, 1/n)"
  },
  {
    "id": "wm-m1-q15-pendule-g",
    "module": 1,
    "tags": ["shm", "pendulum"],
    "difficulty": "advanced",
    "type": "numeric",
    "active": true,
    "title": "Mesure de g avec un pendule",
    "statement": "Un pendule simple de longueur L = {L} m a une periode de T = {T} s. Calculez la valeur de l'acceleration gravitationnelle g.",
    "givens": {
      "L": 1,
      "T": 2.01
    },
    "unknowns": ["g"],
    "answer": {
      "variable": "g",
      "value": 9.79,
      "unit": "m/s²",
      "tolerance": 2,
      "toleranceType": "percent"
    },
    "hints": [
      "T = 2π√(L/g)",
      "Isolez g: g = 4π²L/T²",
      "Cette methode est utilisee pour mesurer g experimentalement"
    ],
    "commonMistakes": [
      {
        "pattern": "0.98",
        "patternType": "value",
        "message": "Vous avez oublie le facteur 4π²",
        "hint": "g = 4π²L/T²",
        "category": "formula"
      }
    ],
    "explanation": "De T = 2π√(L/g), on tire g = 4π²L/T² = 4×9.87×1/2.01² = 39.48/4.04 = 9.79 m/s².",
    "parameters": {
      "L": { "min": 0.5, "max": 2, "step": 0.25, "unit": "m" },
      "T": { "min": 1.4, "max": 2.8, "step": 0.1, "unit": "s" }
    },
    "answerFormula": "4 * 3.14159 * 3.14159 * L / (T * T)"
  },
  {
    "id": "wm-m1-q16-battement",
    "module": 1,
    "tags": ["waves", "beats"],
    "difficulty": "advanced",
    "type": "numeric",
    "active": true,
    "title": "Frequence de battement",
    "statement": "Deux diapasons ont des frequences de {f1} Hz et {f2} Hz. Calculez la frequence de battement percue.",
    "givens": {
      "f1": 440,
      "f2": 444
    },
    "unknowns": ["fb"],
    "answer": {
      "variable": "fb",
      "value": 4,
      "unit": "Hz",
      "tolerance": 0,
      "toleranceType": "absolute"
    },
    "hints": [
      "La frequence de battement = |f1 - f2|",
      "C'est la frequence des variations d'amplitude",
      "fb = |f1 - f2|"
    ],
    "commonMistakes": [
      {
        "pattern": "884",
        "patternType": "value",
        "message": "Vous avez additionne les frequences",
        "hint": "fb = |f1 - f2|, pas f1 + f2",
        "category": "formula"
      }
    ],
    "explanation": "fb = |f1 - f2| = |440 - 444| = 4 Hz. On entend 4 pulsations par seconde.",
    "parameters": {
      "f1": { "min": 400, "max": 500, "step": 10, "unit": "Hz" },
      "f2": { "min": 402, "max": 510, "step": 10, "unit": "Hz" }
    },
    "answerFormula": "abs(f1 - f2)"
  },
  {
    "id": "wm-m1-q17-vitesse-corde",
    "module": 1,
    "tags": ["standing-waves", "string"],
    "difficulty": "expert",
    "type": "numeric",
    "active": true,
    "title": "Vitesse d'onde sur une corde",
    "statement": "Une corde de longueur L = {L} m a une masse de {m} g. Elle est tendue avec une force de {T} N. Calculez la vitesse de propagation des ondes.",
    "givens": {
      "L": 2,
      "m": 10,
      "T": 80
    },
    "unknowns": ["v"],
    "answer": {
      "variable": "v",
      "value": 126.5,
      "unit": "m/s",
      "tolerance": 2,
      "toleranceType": "percent"
    },
    "hints": [
      "v = √(T/μ) ou μ est la masse lineique",
      "μ = m/L",
      "Convertissez la masse en kg"
    ],
    "commonMistakes": [
      {
        "pattern": "4",
        "patternType": "value",
        "message": "Vous avez calcule √(T/m) sans μ",
        "hint": "μ = m/L, puis v = √(T/μ)",
        "category": "formula"
      }
    ],
    "explanation": "μ = m/L = 0.010/2 = 0.005 kg/m. v = √(T/μ) = √(80/0.005) = √16000 = 126.5 m/s.",
    "parameters": {
      "L": { "min": 1, "max": 3, "step": 0.5, "unit": "m" },
      "m": { "min": 5, "max": 20, "step": 5, "unit": "g" },
      "T": { "min": 40, "max": 150, "step": 20, "unit": "N" }
    },
    "answerFormula": "sqrt(T / (m/1000 / L))"
  },
  {
    "id": "wm-m1-q18-harmoniques-corde",
    "module": 1,
    "tags": ["standing-waves", "harmonics"],
    "difficulty": "expert",
    "type": "numeric",
    "active": true,
    "title": "Frequence du nieme harmonique",
    "statement": "Une corde de longueur L = {L} m est fixee aux deux extremites. La frequence fondamentale est {f1} Hz. Calculez la frequence du {n}e harmonique.",
    "givens": {
      "L": 0.8,
      "f1": 220,
      "n": 4
    },
    "unknowns": ["fn"],
    "answer": {
      "variable": "fn",
      "value": 880,
      "unit": "Hz",
      "tolerance": 0,
      "toleranceType": "absolute"
    },
    "hints": [
      "fn = n × f1",
      "Les harmoniques sont des multiples entiers de la fondamentale",
      "Le 4e harmonique = 4 × frequence fondamentale"
    ],
    "commonMistakes": [
      {
        "pattern": "660",
        "patternType": "value",
        "message": "Vous avez calcule (n-1) × f1 ou 3 × f1",
        "hint": "Le nieme harmonique = n × f1",
        "category": "formula"
      }
    ],
    "explanation": "fn = n × f1 = 4 × 220 = 880 Hz.",
    "parameters": {
      "L": { "min": 0.5, "max": 1.5, "step": 0.1, "unit": "m" },
      "f1": { "min": 100, "max": 300, "step": 20, "unit": "Hz" },
      "n": { "min": 2, "max": 6, "step": 1, "unit": "" }
    },
    "answerFormula": "n * f1"
  },
  {
    "id": "wm-m1-q19-doppler-recul",
    "module": 1,
    "tags": ["doppler", "sound"],
    "difficulty": "expert",
    "type": "numeric",
    "active": true,
    "title": "Doppler - Source qui s'eloigne",
    "statement": "Une sirene de frequence {f0} Hz s'eloigne d'un observateur immobile a {vs} m/s. Quelle frequence l'observateur percoit-il? (c = 340 m/s)",
    "givens": {
      "f0": 1000,
      "vs": 30,
      "c": 340
    },
    "unknowns": ["f"],
    "answer": {
      "variable": "f",
      "value": 919,
      "unit": "Hz",
      "tolerance": 2,
      "toleranceType": "percent"
    },
    "hints": [
      "Pour une source qui s'eloigne: f = f0 × c/(c + vs)",
      "La frequence percue est plus basse (son plus grave)",
      "Attention au signe: c + vs au denominateur"
    ],
    "commonMistakes": [
      {
        "pattern": "1097",
        "patternType": "value",
        "message": "Vous avez utilise la formule pour une source qui s'approche",
        "hint": "Pour s'eloigner: f = f0 × c/(c + vs)",
        "category": "formula"
      }
    ],
    "explanation": "f = f0 × c/(c + vs) = 1000 × 340/(340 + 30) = 1000 × 340/370 = 919 Hz.",
    "parameters": {
      "f0": { "min": 500, "max": 1500, "step": 100, "unit": "Hz" },
      "vs": { "min": 20, "max": 50, "step": 5, "unit": "m/s" }
    },
    "answerFormula": "f0 * c / (c + vs)"
  },
  {
    "id": "wm-m1-q20-tube-ouvert",
    "module": 1,
    "tags": ["standing-waves", "resonance"],
    "difficulty": "expert",
    "type": "numeric",
    "active": true,
    "title": "Tube ouvert aux deux extremites",
    "statement": "Un tube ouvert aux deux extremites a une longueur L = {L} m. Calculez la frequence du 2e harmonique. (c = 340 m/s)",
    "givens": {
      "L": 0.85,
      "c": 340,
      "n": 2
    },
    "unknowns": ["f2"],
    "answer": {
      "variable": "f2",
      "value": 400,
      "unit": "Hz",
      "tolerance": 2,
      "toleranceType": "percent"
    },
    "hints": [
      "Pour un tube ouvert: fn = n × c/(2L)",
      "La fondamentale (n=1): f1 = c/(2L)",
      "Le 2e harmonique: f2 = 2 × f1 = c/L"
    ],
    "commonMistakes": [
      {
        "pattern": "200",
        "patternType": "value",
        "message": "Vous avez calcule la fondamentale (n=1)",
        "hint": "Pour n=2: f2 = 2 × c/(2L) = c/L",
        "category": "concept"
      }
    ],
    "explanation": "fn = n × c/(2L). Pour n=2: f2 = 2 × 340/(2×0.85) = 680/1.7 = 400 Hz.",
    "parameters": {
      "L": { "min": 0.5, "max": 1.5, "step": 0.1, "unit": "m" }
    },
    "answerFormula": "n * c / (2 * L)"
  }
]
